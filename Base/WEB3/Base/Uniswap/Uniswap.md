## üß† ‰∏Ä„ÄÅÂÖ≥ÈîÆËØçËß£Èáä
### 1. **Ë∞É ABI ËØ¢‰ª∑**
- ABIÔºàApplication Binary InterfaceÔºâÊòØÂêàÁ∫¶Ë∞ÉÁî®ÁöÑÊé•Âè£ÂÆö‰πâÔºåÁî®‰∫éÂíå Uniswap ÂêàÁ∫¶‰∫§‰∫í„ÄÇ
- ‰Ω†ÂèØ‰ª•Ë∞ÉÁî® `getAmountsOut`ÔºàV2ÔºâÊàñ `quoteExactInputSingle`ÔºàV3ÔºâÊù•Ê®°ÊãüÊä•‰ª∑ÔºåÂç≥ÔºöÁªô‰∏Ä‰∏™ tokenIn Êï∞ÈáèÔºåÊü•ËØ¢ËÉΩÊç¢Â§öÂ∞ë tokenOut„ÄÇ
### 2. **Ëß£Êûê‰∫ã‰ª∂ÔºàEventÔºâ**
- Swap ÂèëÁîüÊó∂ÂêàÁ∫¶‰ºö emit ‰∫ã‰ª∂Ôºå‰æãÂ¶Ç `Swap(address sender, ...)`„ÄÇ
- ‰Ω†ÁõëÂê¨‰∫ã‰ª∂Êó•ÂøóÔºàlogsÔºâÔºåÂèØ‰ª•Ëé∑Áü•ÊØèÁ¨î‰∫§ÊòìÁöÑËØ¶ÊÉÖÔºåÂ¶ÇË∞ÅÊç¢‰∫ÜÂ§öÂ∞ë token„ÄÅÊç¢Êàê‰∫Ü‰ªÄ‰πàÁ≠â„ÄÇ
### 3. **ÂçïË∑≥Ë∑ØÂæÑÔºàSingle Hop SwapÔºâ**
- Âè™ÁªèËøá‰∏Ä‰∏™‰∫§ÊòìÊ±†ÔºàtokenA ‚Üî tokenBÔºâÔºåËÄåÈùûÂ§ö‰∏™Ê±†ÔºàtokenA ‚Üí tokenB ‚Üí tokenCÔºâ„ÄÇ
- ‰ΩøÁî® V2 `swapExactTokensForTokens` Êàñ V3 ÁöÑ `exactInputSingle` ÊñπÊ≥ï„ÄÇ
### 4. **LPÔºàLiquidity ProviderÔºâ**
- Êèê‰æõÊµÅÂä®ÊÄßÁöÑÁî®Êà∑ÔºåÂ∞Ü tokenA Âíå tokenB Â≠òÂÖ•Ê±†Â≠êÔºåÊç¢Âæó LP token„ÄÇ
- ‰Ω†ÁöÑ swap ‰ºöÁî®Âà∞‰ªñ‰ª¨Êèê‰æõÁöÑÊµÅÂä®ÊÄßÔºåÊâãÁª≠Ë¥π‰ºöÂàÜÁªô LP„ÄÇ
### 5. **Ê∑±Â∫¶ÔºàLiquidity DepthÔºâ**
- Ë°®Á§∫‰∏Ä‰∏™‰∫§ÊòìÊ±†‰∏≠ token ÁöÑÊï∞ÈáèÂíåÂàÜÂ∏É„ÄÇ
- Ê∑±Â∫¶Ë∂äÂ§ßÔºåÊªëÁÇπË∂äÂ∞èÔºåÂΩ±ÂìçÊä•‰ª∑ÁöÑÁ®≥ÂÆöÊÄß„ÄÇ
### 6. **Tick**
- ÁüøÊ±†ÂΩìÂâç‰ª∑Ê†ºÁöÑÊä•‰ª∑„ÄÇ
- V3 ÂºïÂÖ•ÁöÑ‰ª∑Ê†ºÂàªÂ∫¶Âçï‰Ωç„ÄÇ
- Ê±†Â≠êÁöÑ‰ª∑Ê†ºËåÉÂõ¥Ë¢´ÂàíÂàÜ‰∏∫ ticksÔºå‰æãÂ¶Ç‰∏Ä‰∏™ tick Ë°®Á§∫ 1.0001 ÁöÑÂÄçÁéá„ÄÇ
- ‰Ω†ÂèØ‰ª•ÈÄöËøá tick Êù•Âà§Êñ≠ÂΩìÂâç‰ª∑Ê†º„ÄÅÊ¥ªË∑ÉÊµÅÂä®ÊÄßÁ≠â„ÄÇ
### 7. **sqrtPriceX96**
**Uniswap V3 ÁöÑÊ†∏ÂøÉ‰ª∑Ê†ºË°®Á§∫ÊñπÂºè**„ÄÇÁüøÊ±†ÁöÑÂΩìÂâç‰ª∑Ê†ºÔºå‰ª• token0 Âíå token1 ‰πãÈó¥ÁöÑÊØîÁéáËÆ°ÁÆóÔºàÂç≥ tokenIn/tokenOutÔºâÂπ∂ÊîæÂ§ß‰∫Ü 2962^{96}296 ÂÄçÊù•ÊèêÈ´òÁ≤æÂ∫¶
### 8. **Router**
> Â∞ÅË£Ö‰∫ÜÂ∏∏ËßÅÁöÑ‰∫§ÊòìË∑ØÂæÑ‰∏éÊµÅÂä®ÊÄßÊ∑ªÂä†/ÁßªÈô§ÁöÑÊìç‰ΩúÈÄªËæë„ÄÇÂçïË∑≥„ÄÅÂ§öË∑≥ token ÂÖëÊç¢,Ê∑ªÂä†ÊàñÁßªÈô§ LP ÊµÅÂä®ÊÄß, ÊîØÊåÅ WETH ‚Üî ETH ÁöÑÂåÖË£Ö/Ëß£ÂåÖ

**RouterÔºàË∑ØÁî±Âô®ÂêàÁ∫¶Ôºâ** ÊòØÁî®Êù•ÁúüÊ≠£ÊâßË°å‰∫§ÊòìÔºàswapÔºâÁöÑÂêàÁ∫¶„ÄÇÂÆÉ‰ºöËá™Âä®ÂØªÊâæÊúÄ‰Ω≥Ë∑ØÂæÑÊù•ÂÖëÊç¢ÔºåÊØîÂ¶ÇÔºö
- ÂçïË∑≥ÔºöWETH ‚Üí USDC
- Â§öË∑≥ÔºöWETH ‚Üí DAI ‚Üí USDC

‰∏çÂêåÁâàÊú¨ÁöÑ RouterÔºö

|ÁâàÊú¨|Router Âú∞ÂùÄ|‰ΩúÁî®|
|---|---|---|
|V2|`0x7a250d...`|ÁÆÄÂçï token ‚Üî token ‰∫§Êç¢|
|V3|`0xE59242...`|Êõ¥Â§çÊùÇÔºåÊîØÊåÅ tick„ÄÅÂçïË∑≥„ÄÅÂ§öË∑≥Ë∑ØÂæÑ‰∫§Êç¢|

üëâ Âú® **Ê®°ÊãüÊä•‰ª∑** Êó∂Êàë‰ª¨Ë∞ÉÁî®ÁöÑÊòØ **Quoter** ÂêàÁ∫¶  
üëâ Âú® **ÁúüÂÆû‰∏ãÂçï‰∫§Êòì** Êó∂‰ºöË∞ÉÁî® **Router** ÂêàÁ∫¶




## ‰∫å„ÄÅÂÆûÊàòÂ≠¶‰π†Ë∑ØÁ∫ø

### ‚úÖ Step 1ÔºöÂü∫Á°Ä‰∫ÜËß£‰∏éÂÆòÊñπËµÑÊ∫ê

|ÂÜÖÂÆπ|Êé®ËçêËµÑÊ∫ê|
|---|---|
|Uniswap V2 & V3 ÁôΩÁöÆ‰π¶|https://uniswap.org/whitepaper|
|Uniswap V3 Core Docs|https://docs.uniswap.org/|
|ABI Êé•Âè£ÊñáÊ°£|https://docs.uniswap.org/reference/contracts|

---

### ‚úÖ Step 2ÔºöÂêàÁ∫¶‰∫§‰∫í‰∏éÊä•‰ª∑ÔºàÊ®°Êãü‰∫§ÊòìÔºâ

1. ‰∫ÜËß£ V2/V3 ÂêàÁ∫¶Âú∞ÂùÄÔºöRouter Âíå Pool
    - V2 RouterÔºö`0x7a250d5630B4cF539739dF2C5dAcb4c659F2488D`
    - V3 RouterÔºö`0xE592427A0AEce92De3Edee1F18E0157C05861564`
2. ‰ΩøÁî®ËÑöÊú¨Êàñ Ethers.js/Web3.jsÔºö
    - `getAmountsOut(amountIn, path)`ÔºàV2Ôºâ
    - `quoteExactInputSingle`ÔºàV3Ôºâ
3. Â∑•ÂÖ∑Êé®ËçêÔºö
    - Ethers.jsÔºàÊé®ËçêÔºâ
    - ViemÔºàËΩªÈáèÊñ∞Â∫ìÔºâ
    - Hardhat + Alchemy/Infura/Ankr ËäÇÁÇπ
---

### ‚úÖ Step 3ÔºöÁõëÂê¨‰∫ã‰ª∂ÔºàËß£Êûê swapÔºâ

1. ‰ΩøÁî® Ethers.js Êàñ Web3.js `contract.on("Swap", callback)`
2. ÊàñËÄÖËß£ÊûêÂéÜÂè≤ logsÔºö
   ```js
		provider.getLogs({
		  address: poolAddress,
		  topics: [swapTopicHash],
		  fromBlock,
		  toBlock
		})
     ```
3. ÂàÜÊûêÂ≠óÊÆµÔºö
    - sender, recipient, amount0/1In/Out
    - ÂèØ‰ª•ËÆ°ÁÆó token ‰ª∑Ê†ºÂèòÂåñ„ÄÅswap ÊàêÊú¨Á≠â

---

### ‚úÖ Step 4ÔºöÁêÜËß£Ê∑±Â∫¶„ÄÅLP„ÄÅTickÔºàUniswap V3Ôºâ

1. ‰ΩøÁî® GraphQL/Uniswap SubgraphÔºö
    - https://thegraph.com/explorer/subgraph/uniswap/uniswap-v3
2. ÂÖ≥ÈîÆÂ≠óÊÆµÔºö
    - `liquidity`ÔºöÂΩìÂâçÊ±†Â≠êÊ∑±Â∫¶
    - `tick`ÔºöÂΩìÂâç tick index
    - `sqrtPriceX96`Ôºö‰ª∑Ê†ºÊ†πÂè∑ÔºåËÆ°ÁÆóÁúüÂÆû‰ª∑Ê†ºÁî®
3. Tick ‰ª∑Ê†ºÊç¢ÁÆóÂÖ¨ÂºèÔºö
    `price = 1.0001 ^ tick`

---

### ‚úÖ Step 5ÔºöÊûÑÂª∫‰Ω†Ëá™Â∑±ÁöÑËÑöÊú¨/Â∫îÁî®

ÁõÆÊ†áÁ§∫‰æãÔºö
- Ëé∑Âèñ ETH ‚Üí USDC swap Êä•‰ª∑ÔºàV2 Âíå V3 ÂØπÊØîÔºâ
- ÁõëÂê¨Êüê‰∫§ÊòìÂØπÁöÑÂÆûÊó∂‰∫§Êòì‰∫ã‰ª∂
- ÂàÜÊûêÊüêÊ±†ÂΩìÂâç tick„ÄÅÊ∑±Â∫¶„ÄÅÊ¥ªË∑É LP Âå∫Èó¥
- Ê®°Êãü‰∏ÄÁ¨î‰∫§ÊòìÔºåËÆ∞ÂΩïÂÖ∂ÊªëÁÇπ‰∏éÁúüÂÆû‰ª∑Ê†º

---

[Ëé∑ÂèñÊä•‰ª∑ |Áªü‰∏Ä‰∫§Êç¢ --- Getting a Quote | Uniswap](https://docs.uniswap.org/sdk/v3/guides/swaps/quoting)
## ‚öíÔ∏è Â∑•ÂÖ∑Êé®Ëçê

|Â∑•ÂÖ∑|Áî®ÈÄî|
|---|---|
|Alchemy / Infura|RPC ËäÇÁÇπ|
|Ethers.js|JS ÂêàÁ∫¶‰∫§‰∫í|
|Foundry / Hardhat|ÊµãËØïÂêàÁ∫¶Ë∞ÉÁî®|
|The Graph|Ëé∑Âèñ LP„ÄÅtick Êï∞ÊçÆ|
|Tenderly|‰∫ãÂä°Ë∞ÉËØï„ÄÅÊ®°Êãü|
|Uniswap V3 SDK|‰∫§ÊòìË∑ØÂæÑËßÑÂàí„ÄÅtick Ê®°Êãü|


```ts
import { ethers } from 'ethers';
import IUniswapV3PoolABI from '@uniswap/v3-core/artifacts/contracts/interfaces/IUniswapV3Pool.sol/IUniswapV3Pool.json'
import { abi as QuoterABI } from '@uniswap/v3-periphery/artifacts/contracts/lens/Quoter.sol/Quoter.json';


const provider = new ethers.providers.JsonRpcProvider('https://eth-mainnet.g.alchemy.com/v2/KEY');

const WETH_ADDRESS = ethers.utils.getAddress("0xc02aaa39b223fe8d0a0e5c4f27ead9083c756cc2");
const USDC_ADDRESS = ethers.utils.getAddress("0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48");
const UNISWAP_V3_POOL_ADDRESS = '0x88e6A0c2dDD26FEEb64F039a2c41296FcB3f5640'; // USDC/WETH 0.05%
const QUOTER_ADDRESS = '0xb27308f9F90D607463bb33eA1BeBb41C27CE5AB6';


const main = async () => {
	
	const poolContract = new ethers.Contract(UNISWAP_V3_POOL_ADDRESS, IUniswapV3PoolABI.abi, provider);
	const quoterContract = new ethers.Contract(QUOTER_ADDRESS, QuoterABI, provider);
	
	// 1. Ëé∑Âèñ slot0ÔºàÂåÖÊã¨ sqrtPriceX96 ÂíåÂΩìÂâç tickÔºâ
	const [sqrtPriceX96, tick, , , , ,] = await poolContract.slot0();
	console.log('‚úÖ ÂΩìÂâç sqrtPriceX96:', sqrtPriceX96.toString());
	console.log('‚úÖ ÂΩìÂâç Tick:', tick);
	
	// 2. Ëé∑ÂèñÂΩìÂâçÊµÅÂä®ÊÄßÔºàLiquidityÔºâ
	const liquidity = await poolContract.liquidity();
	console.log('‚úÖ ÂΩìÂâç LP ÊµÅÂä®ÊÄß:', liquidity.toString());
	
	// 3. Swap Êä•‰ª∑ÔºàËæìÂÖ• 1 WETH Êç¢ USDCÔºâ
	const amountIn = ethers.utils.parseEther('1');
	const quotedAmountOut = await quoterContract.callStatic.quoteExactInputSingle(
		WETH_ADDRESS,
		USDC_ADDRESS,
		3000, // fee: 0.05%
		amountIn,
		0
	);
	console.log(`‚úÖ ‰º∞ÁÆóÊä•‰ª∑: 1 WETH ÂèØÂæóÁ∫¶ ${ethers.utils.formatUnits(quotedAmountOut, 6)} USDC`);
	
	// 4. ÁõëÂê¨ Swap ‰∫ã‰ª∂
	poolContract.on('Swap', (
		sender,
		recipient,
		amount0,
		amount1,
		sqrtPriceX96,
		liquidity,
		tick
	) => {
		console.log(`üì¢ Swap Event:`);
		console.log(`From ${sender} ‚Üí ${recipient}`);
		console.log(`Token0 Change: ${ethers.utils.formatUnits(amount0)}`);
		console.log(`Token1 Change: ${ethers.utils.formatUnits(amount1)}`);
		console.log(`New Tick: ${tick}`);
		console.log(`New sqrtPriceX96: ${sqrtPriceX96}`);
		console.log(`New liquidity: ${liquidity}`);
		console.log('---------------------------');
	});
};

main();



‚úÖ ÂΩìÂâç sqrtPriceX96: 1864234913218244291503370571162558
‚úÖ ÂΩìÂâç Tick: 201330
‚úÖ ÂΩìÂâç LP ÊµÅÂä®ÊÄß: 6084222501667747663
‚úÖ ‰º∞ÁÆóÊä•‰ª∑: 1 WETH ÂèØÂæóÁ∫¶ 1797.841328 USDC
üì¢ Swap Event:
From 0x5050e08626c499411B5D0E0b5AF0E83d3fD82EDF ‚Üí 0x5050e08626c499411B5D0E0b5AF0E83d3fD82EDF
Token0 Change: 0.000000016264101854
Token1 Change: -8.999692493060258515
New Tick: 201329
New sqrtPriceX96: 1864117560196013696886026851855178
New liquidity: 6066937332023339941
---------------------------
```
- Êü•ËØ¢Êüê‰∏™Ê±†Â≠êÔºàÂ¶Ç `WETH/USDC`ÔºâÁöÑÂΩìÂâç‰ª∑Ê†ºÂíå tick
- ‰º∞ÁÆó‰ªéËæìÂÖ• tokenÔºàÂ¶Ç WETHÔºâÊç¢Âà∞ËæìÂá∫ tokenÔºàÂ¶Ç USDCÔºâÂæóÂà∞ÁöÑÊï∞Èáè
- Ëé∑ÂèñÂΩìÂâç LP Ê±†ÂÇ®Â§áÔºàÈó¥Êé•ÈÄöËøáÂêàÁ∫¶Ôºâ
- ‰ΩøÁî® ABI Ë∞ÉÁî® `slot0()` Ëé∑ÂèñÂΩìÂâç tick Âíå sqrtPriceX96
- Ëß£Êûê `Swap` ‰∫ã‰ª∂

|ÈúÄÊ±ÇÈ°π|ÂÆûÁé∞ÊñπÂºè|
|---|---|
|‚úÖ Êü•ËØ¢ÂΩìÂâç‰ª∑Ê†º|‰ΩøÁî® `slot0()` Ëé∑Âèñ `sqrtPriceX96` ËÆ°ÁÆó|
|‚úÖ Ëé∑Âèñ LP Ê∑±Â∫¶|Êü•ËØ¢ `liquidity` ÂèòÈáè|
|‚úÖ Ëé∑Âèñ Tick|‰ΩøÁî® `slot0()` Ëé∑ÂèñÂΩìÂâç tick|
|‚úÖ ABI Ë∞ÉÁî®ÂêàÁ∫¶|Áî® ABI ËØªÂèñÂêàÁ∫¶Êï∞ÊçÆ|
|‚úÖ Swap Êä•‰ª∑|‰ΩøÁî® V3 SDK ÊûÑÂª∫ `Trade`|
|‚úÖ ‰∫ã‰ª∂Ëß£Êûê|ÁõëÂê¨Âπ∂Ëß£Êûê `Swap` ‰∫ã‰ª∂|




```ts
import { ethers } from "ethers";
import {
	Pool, TickMath, nearestUsableTick, Trade, Route, SwapQuoter, SwapRouter,
	TickListDataProvider
} from "@uniswap/v3-sdk";
import {
	Token, CurrencyAmount, TradeType, Percent
} from "@uniswap/sdk-core";
import IUniswapV3PoolABI from "@uniswap/v3-core/artifacts/contracts/UniswapV3Pool.sol/UniswapV3Pool.json";
import { JSBI } from "@uniswap/sdk";
  
// ‚úÖ ÂèÇÊï∞
const provider = new ethers.providers.JsonRpcProvider("https://eth-mainnet.g.alchemy.com/v2/KEY");
const poolAddress = "0x8ad599c3a0ff1de082011efddc58f1908eb6e6d8"; // USDC/WETH 0.3%

// ‚úÖ Token ÂÆö‰πâÔºàÊ≥®ÊÑè checksumÔºâ
const USDC = new Token(1, ethers.utils.getAddress("0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48"), 6, "USDC", "USD Coin");
const WETH = new Token(1, ethers.utils.getAddress("0xC02aaA39b223FE8D0A0e5C4F27eAD9083C756Cc2"), 18, "WETH", "Wrapped Ether");

async function main() {
	const poolContract = new ethers.Contract(poolAddress, IUniswapV3PoolABI.abi, provider);
	
	const [slot0, liquidity] = await Promise.all([
		poolContract.slot0(),
		poolContract.liquidity()
	]);
	
	const sqrtPriceX96 = slot0.sqrtPriceX96;
	const tick = slot0.tick;
	const tickSpacing = 60; // USDC/WETH ÁöÑ feeTier = 3000 -> spacing = 60
	
	console.log("‚úÖ ÂΩìÂâç sqrtPriceX96:", sqrtPriceX96.toString());
	console.log("‚úÖ ÂΩìÂâç Tick:", tick);
	console.log("‚úÖ ÂΩìÂâç LP ÊµÅÂä®ÊÄß:", liquidity.toString());
	
	const ticks = [
		{
			index: 201300,
			liquidityNet: JSBI.BigInt("123456789"),
			liquidityGross: JSBI.BigInt("123456789")
		},
		{
			index: 201360,
			liquidityNet: JSBI.BigInt("-123456789"),
			liquidityGross: JSBI.BigInt("123456789")
		}
	];
	
	const tickProvider = new TickListDataProvider(ticks, tickSpacing);
	const pool = new Pool(
		WETH,
		USDC,
		3000,
		sqrtPriceX96.toString(),
		liquidity.toString(),
		tick,
		tickProvider
	);
	
	// ÊûÑÂª∫ Route Âíå Trade
	const amountIn = CurrencyAmount.fromRawAmount(WETH, ethers.utils.parseEther("1").toString());
	const route = new Route([pool], WETH, USDC);
	const trade = await Trade.fromRoute(route, amountIn, TradeType.EXACT_INPUT);
	
	console.log("Mid Price:", route.midPrice.toSignificant(6)); //Ê±†‰∏≠ÂΩìÂâçÁöÑ‰∏≠Èó¥‰ª∑Ê†ºÔºàÁêÜËÆ∫‰ª∑Ê†ºÔºâ
	console.log("Execution Price:", trade.executionPrice.toSignificant(6)); //ÂÆûÈôÖÊàê‰∫§‰ª∑Ê†º
	console.log("Expected Output:", trade.outputAmount.toSignificant(6)); //‰Ω†È¢ÑËÆ°ËÉΩÊãøÂà∞Â§öÂ∞ë USDC
	
	// Ëß£Êûê‰∫ã‰ª∂ÔºàÊ®°Êãü swap Êó•ÂøóÔºâ
	poolContract.on("Swap", (sender, recipient, amount0, amount1, sqrtPriceX96, liquidity, tick, event) => {
		console.log("üî• Swap Event Detected:");
		console.log({ sender, recipient, amount0: amount0.toString(), amount1: amount1.toString() });
		event.removeListener(); // Âè™ÁõëÂê¨‰∏ÄÊ¨°
	});
}

main().catch(console.error);

‚úÖ ÂΩìÂâç sqrtPriceX96: 1865736113605630736735858196288758
‚úÖ ÂΩìÂâç Tick: 201346
‚úÖ ÂΩìÂâç LP ÊµÅÂä®ÊÄß: 7266794844411932770
Mid Price: 1803.26
Execution Price: 1797.84
Expected Output: 1797.84
```

