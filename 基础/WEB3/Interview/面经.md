

## 面经
[Solana](Solana.md)

## L2概念

[L0 L1 L2](../基础知识/Mantle-Network/Mantle-Network)
- **Layer 0**是数据传输层，指的就是区块链最基础的底层协议，也就是节点之间传递讯息的通讯层，负责基础的数据传递及建立共识达成效率。
- **Layer 1**是底层区块链。比特币(BTC)、以太坊(ETH)、币安智能链(BNB)和Solana都属于Layer-1协议。
- **Layer2**又称链下扩容，指不改变区块链底层协议和基础规则，通过状态通道、侧链，乐观卷积，zk，等方案提高交易处理速度。
- **Layer3**指的是应用层。 DAO， DID

## 跨链

[跨链](../基础知识/Mantle-Network/Mantle-Network.md#^94e5dc)

## MEV 最大可提取价值 && 优先费
> (Maximum Extractable Value)

优先费：Compute Units，还有一个limit

在 DeFi、NFT Mint 等高竞争场景下，如何合理设置优先费
- **先模拟交易，查看所需的 Compute Units（CU）**，以便估算合理的优先费。
- **观察当前网络的平均优先费水平**，比如可以通过 Solana 区块浏览器或 RPC 获取数据。

| **工具**            | **用途**                                    |
| ----------------- | ----------------------------------------- |
| **NextBlock**     | 用于 **优化区块构建**，提高交易排序优先级                   |
| **Jito**          | 提供 **MEV 交易打包（Jito Bundle）**，支持 **优先费用**  |
| **Priority Fees** | 允许用户 **支付更高的 Compute Units 费用**，提高交易执行优先级 |
| **MEV**           | 通过 **交易排序控制** 提取额外价值，如套利、清算等              |

- 通过 **ComputeBudgetProgram** 手动提高 **Compute Unit 费用** ✅
- 使用 **Jito-Solana** 发送 **Jito Bundles** ✅
- 运行 **NextBlock** 提高 **交易排序优先级** ✅


## LUT ALT地址查找表
> 1、先解释v0，-> message是含有地址查找表-> 作用，-> 本公司的multiple call


## 安全
[合约安全漏洞](../基础知识/合约安全漏洞/合约安全漏洞.md)


## 降低gas

[EVM](../基础知识/WEB3基础/WEB3基础.md#^b9d849)

[Solana](../基础知识/Solana/Solana.md#^72f9e0)

> 组成：
> 基本费用，受网络影响，指令大小，执行成本（计算费用（逻辑方面），存储费用（写入））
> 三个层面：
> 1、代码层面： 减少读写，使用循环，序列化
> 2、合约交互层面：地址查找表，网络状态
> 3、人工交流层面：减少参数，或者合并参数


## NFT


[NFT 常见的协议 || ERC](Solana.md#^91929f)
> EIP是一个标准：如[EIP712类型化数据签名](https://eips.ethereum.org/EIPS/eip-712)是一种更高级、更安全的签名方法。当支持 EIP712 的 Dapp 请求签名时，钱包会展示签名消息的原始数据，用户可以在验证数据符合预期之后签名。


## Defi






## MPL

| **模块 (Module)**                | **功能 (Functionality)**                                     | **适用场景 (Use Case)**                          |
| ------------------------------ | ---------------------------------------------------------- | -------------------------------------------- |
| **Bubblegum（泡泡糖）**             | 通过 **Merkle Tree** 结构减少存储成本，压缩 NFT（Compressed NFTs），降低存储成本 | 适用于游戏资产、大规模 NFT 发行                           |
| **Core（核心）**                   | 新一代 NFT 标准                                                 | 扩展了 Token Metadata，增强兼容性和可扩展性。               |
| **Fusion（融合）**                 | NFT 嵌套 NFT，允许 NFT 作为另一个 NFT 的一部分，支持复杂的 NFT 组合。             | 如游戏角色装备系统。                                   |
| **Inscription（铭刻）**            | Solana 上的 NFT 刻写                                           | 允许将数据永久刻写到 Solana 链上，提升不可篡改性。，类似比特币 Ordinals |
| **Token Metadata（代币元数据）**      | NFT 元数据标准，定义 NFT 的名称、图片、属性、授权等信息。                          | NFT 交易市场、艺术品收藏                               |
| **Candy Machine（糖果机）**         | NFT 发行工具（Launchpad）                                        | 公平铸造（Fair Mint）、白名单销售                        |
| **Core Candy Machine（核心糖果机）**  | 数字资产发行工具                                                   | Candy Machine 的升级版，支持更多类型的数字资产，不仅限于 NFT      |
| **Token Auth Rules（代币授权规则）**   | NFT 权限管理                                                   | 允许 NFT 设定访问规则，如**仅特定地址可转移**，增强安全性            |
| **Hydra（九头蛇）** - **Fanout 钱包** | Fanout 钱包（收益分配）允许多个用户共享一个钱包。                               | 适用于**DAO 分红、收益分享、NFT 版税**等场景。                |
| **MPL-Hybrid（混合资产）**           | 允许 NFT 和 FT（可替代代币，如 SOL、USDC）组合。                           | 创建**半同质化代币（SFT）**，如游戏道具、门票等。                 |


## 项目

[amm](amm.md)








## Other
1、rust内存模型（1. **所有权 (Ownership)**，2. **借用 (Borrowing)**，3. **生命周期 (Lifetimes)**，4. **栈和堆 (Stack and Heap)**，5. **并发和原子性**）
2、扫块多线程优化方式：整合一个拿队列进行保存入库。
3、gas组成（Gas Fee = Gas Used * Gas Price，Gas 可以分为两个主要组成部分：**Gas Limit** 和 **Gas Price**。）
- **基础费用（Intrinsic Gas Cost）**：与交易的基本数据（如签名、接收者地址等）相关的固定成本。每笔交易都有最低的 21,000 gas 作为基础费用。
- **执行成本（Execution Gas Cost）**：与实际执行的操作有关，比如存储、计算等。智能合约的每个操作（如存储写入、函数调用、循环等）都有特定的 gas 消耗。
4、layer2是什么，layer1和layer2如何通信（状态通道）
5、双花问题
6、[区块链｜ 期望35K｜腾讯2轮面经，感觉区块链方向一点都不卷 (qq.com)](https://mp.weixin.qq.com/s/21_WEWEprfP7BEWZ9rrhwQ)
7、Mev问题（三明治攻击等等）
8、入库的事务如何处理。
9、对于solana的账户数据泄露（猜数游戏）
10、如何节约gas



###  OKX

#### **LUT**

| **LUT 用途**  | **Ethereum（EVM）**  | **Solana**       |
| ----------- | ------------------ | ---------------- |
| **优化计算**    | 预计算数学/哈希值，加速智能合约   | 不适用              |
| **Gas 费优化** | 使用 `mapping` 作为查找表 | 通过 LUT 减少交易大小    |
| **地址管理**    | 依赖合约内存储            | 使用 LUT 存储和复用账户地址 |
| **交易优化**    | 通过数据存储减少计算         | 降低账户管理成本，提高交易吞吐量 |

#### defi/nft相关协议
| **类别**       | **协议（Ethereum）**   | **协议（Solana）**     |
| ------------ | ------------------ | ------------------ |
| **DEX（交易所）** | Uniswap, SushiSwap | Raydium, Orca      |
| **借贷**       | Aave, Compound     | Solend             |
| **衍生品**      | dYdX               | Mango Markets      |
| **稳定币**      | DAI, USDC          | USDC               |
| **资产管理**     | Yearn Finance      | Jupiter            |
| **NFT 交易市场** | OpenSea, Blur      | Magic Eden, Tensor |
| **NFT 借贷**   | BendDAO, NFTfi     | Sharky.fi          |
| **NFT 碎片化**  | Fractional.art     | -                  |
| **NFT 发行**   | Manifold           | Metaplex           |


| **链**        | **协议/标准**               | **特点**                | **示例**                |
| ------------ | ----------------------- | --------------------- | --------------------- |
| **Ethereum** | ERC-721                 | 单一 NFT 标准             | CryptoPunks, BAYC     |
|              | ERC-1155                | 可同时支持 FT & NFT，减少 Gas | Enjin, Gods Unchained |
|              | ERC-2981                | NFT 版税标准              | OpenSea, LooksRare    |
| **Solana**   | Metaplex Token Metadata | Solana 主要 NFT 标准      | Okay Bears, DeGods    |
|              | Compressed NFTs (cNFTs) | 适合大规模 NFT 发行，存储优化     | Tensor Market, DRiP   |
| **Sui**      | Move NFT                | 基于 Move 语言，对象化存储      | Sui Kiosk             |
| **TON**      | TON NFT                 | 适用于 Telegram 生态       | TON DNS               |

#### 报价算法
| **类型**                    | **适用场景**          | **示例协议**                        |
| ------------------------- | ----------------- | ------------------------------- |
| **AMM（自动做市商）**            | DeFi DEX（去中心化交易所） | Uniswap、Sushiswap、Curve、Raydium |
| **订单簿（Order Book）**       | DeFi 交易、NFT 交易    | Serum、dYdX、NFT 市场               |
| **预言机定价（Oracles）**        | DeFi 贷款、合成资产      | Chainlink、Pyth、Switchboard      |
| **拍卖定价（Auction Pricing）** | NFT 交易、IDO、MEV 竞拍 | OpenSea、Magic Eden、Seaport      |
| **指数定价（Index Pricing）**   | ETF、指数基金          | NFTX、Synthetix、Balancer         |
|                           |                   |                                 |





Miner 是从什么方式获取到待打包的 Transactions? 
Miner 是基于什么样策略从 Transaction Pool 中选择 Transaction 呢？
被选择的 Transactions 又是以怎样的顺序(Order)被打包到区块中的呢？
在执行 Transaction 的 EVM 是怎么计算 gas used，从而限定 Block 中 Transaction 的数量?
剩余的 gas 又是怎么返还给 Transaction Proposer 的呢？
EVM 是怎么解释 Contract Code 的 Message Call 并执行的呢？
在执行 Transaction 时，是什么模块，怎样去修改 Contract 中持久化变量？
Smart Contract 中的持久化变量是以什么样的形式存储？又是存储在什么地方？
当新的 Block 更新到 Blockchain 中时，World State 又是在什么时机，以什么方式更新的呢？
哪些数据常驻内存，哪些数据需要保存在 Disk 中呢？